# user_group_backend
Тестовое задание: Веб-приложение на Laravel
Это проект бэкенда веб-приложения, выполненный как тестовое задание. Приложение реализует управление пользователями, 
группами, а также автоматическое управление членством пользователей в группах.

## Требования
- PHP 8.0+
- Laravel 10
- MySQL 8
- Composer
- Docker

## Установка и запуск через Docker

### 1. Склонируйте репозиторий:

git clone https://github.com/Alexx1088/user_group_backend

### 2.  Собрать и запустить контейнеры:

docker-compose up --build -d

### 3.Скопировать файл .env.example в .env

### 4. Проверить настройки базы данных и убедится, что они соответствуют данным из docker-compose.yml

### 5. Выполнить миграции и заполнить базу данных сидерами

docker exec -it user_group php artisan migrate --seed

### 6. Открыть проект в браузере:

Перейти по адресу: http://localhost:8891.

### 7. Администрирование базы данных (Adminer):

Adminer доступен по адресу: http://localhost:8093.

Сервер: db_user_group
Логин: root
Пароль: root
База данных: user_group

## Основная функциональность
Управление пользователями (создание, редактирование, удаление).
Управление группами (создание, редактирование, удаление).
REST API для получения информации о пользователях и группах.
Автоматическое управление сроками членства пользователей в группах через консольные команды.

## REST API Методы

### Пользователи:

GET /api/users — Получение списка пользователей.
POST /api/users — Создание пользователя.
GET /api/users/{id} — Получение информации о пользователе с группами.
PUT /api/users/{id} — Редактирование пользователя.
DELETE /api/users/{id} — Удаление пользователя.

### Группы:

GET /api/groups — Получение списка групп.
POST /api/groups — Создание группы.
GET /api/groups/{id} — Получение информации о группе с пользователями.
PUT /api/groups/{id} — Редактирование группы.
DELETE /api/groups/{id} — Удаление группы.

## Консольные команды

### php artisan user:member

 Добавляет пользователя в группу. Если пользователь не активен (active = false), активирует его.

### php artisan user:check_expiration

 Проверяет пользователей в группах и исключает тех, чье время членства истекло. Отправляет email с 
уведомлением и ставит в очередь задачу по деактивации пользователя, если он не состоит ни в одной группе.

## Расписание заданий

Команда user:check_expiration настроена на выполнение каждые 10 минут через планировщик Laravel (Scheduler).

## Контакты

Если у вас есть вопросы по проекту, вы можете связаться со мной:

telegram: @alexx108
